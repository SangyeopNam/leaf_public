<!doctype html><html lang=ko dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>JPA Cascade vs Mysql Cascade vs Orphan Removal | 봄을 기다리는 낙엽</title>
<meta name=keywords content="concept"><meta name=description content="Cascade의 개념 차이에 대해 정리합니다."><meta name=author content="Leaf"><link rel=canonical href=https://leaf-nam.github.io/posts/concept/jpa_cascade_vs_mysql_cascade_vs_orphan_removal/><meta name=google-site-verification content="l76eAEMadEn1QzS8fLTbrl8ppayZprvV3uuAbMGSy_c"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><meta name=naver-site-verification content="004739eff5dcb2ef7d1e7cb7fc43a0fc093da50c"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity rel="preload stylesheet" as=style><link rel=icon href=https://leaf-nam.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://leaf-nam.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://leaf-nam.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://leaf-nam.github.io/apple-touch-icon.png><link rel=mask-icon href=https://leaf-nam.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ko href=https://leaf-nam.github.io/posts/concept/jpa_cascade_vs_mysql_cascade_vs_orphan_removal/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="JPA Cascade vs Mysql Cascade vs Orphan Removal"><meta property="og:description" content="Cascade의 개념 차이에 대해 정리합니다."><meta property="og:type" content="article"><meta property="og:url" content="https://leaf-nam.github.io/posts/concept/jpa_cascade_vs_mysql_cascade_vs_orphan_removal/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-13T21:01:16+09:00"><meta property="article:modified_time" content="2024-05-13T21:01:16+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="JPA Cascade vs Mysql Cascade vs Orphan Removal"><meta name=twitter:description content="Cascade의 개념 차이에 대해 정리합니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://leaf-nam.github.io/posts/"},{"@type":"ListItem","position":2,"name":"개념정리","item":"https://leaf-nam.github.io/posts/concept/"},{"@type":"ListItem","position":3,"name":"JPA Cascade vs Mysql Cascade vs Orphan Removal","item":"https://leaf-nam.github.io/posts/concept/jpa_cascade_vs_mysql_cascade_vs_orphan_removal/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"JPA Cascade vs Mysql Cascade vs Orphan Removal","name":"JPA Cascade vs Mysql Cascade vs Orphan Removal","description":"Cascade의 개념 차이에 대해 정리합니다.","keywords":["concept"],"articleBody":"개요 프로젝트를 하던 중, 엔티티 연관관계에서 cascade를 잘못 사용하여 잘못된 엔티티가 삭제되었고, 테스트가 실패하는 상황이 발생했습니다.\n동일한 실수를 반복하지 않도록, 이번 기회에 JPA Cascade 개념과 Orphan Removal과는 어떠한 차이가 있는지, 나아가 MySQL의 Cascade와는 어떻게 다른지 확인해보겠습니다.\nJPA Cascade 먼저 Java EE 6의 가이드에는 다음과 같이 명시되어 있습니다.\nJava EE6 가이드의 CASCADE 설명\n설명을 읽어보면 Cascade는 영속성 컨텍스트(Persistence Context)에 부모(Cascade옵션을 작성하는 엔티티)가 특정 작업을 수행할 때, 연관된 엔티티(이후 자식이라고 하겠습니다)도 같은 작업을 수행해야 함을 명시하고 있습니다.\n자세한 내용은 Hibernate의 공식문서1 를 살펴보면 더욱 이해하기 좋은 것 같습니다.\n위 문서의 본문 예시를 참조하면 각 옵션의 주요 기능을 알 수 있습니다.2\n1. ALL 아래 모든 기능들을 포함하는 속성입니다. @Entity public class Person { @Id private Long id; private String name; // Cascade가 All로 설정되어 모든 옵션이 적용되어 있습니다. @OneToMany(mappedBy = \"owner\", cascade = CascadeType.ALL) private List\u003cPhone\u003e phones = new ArrayList\u003c\u003e(); // Getter, Setter 생략 public void addPhone(Phone phone) { this.phones.add(phone); phone.setOwner(this); } } @Entity public class Phone { @Id private Long id; @Column(name = \"`number`\") private String number; @ManyToOne(fetch = FetchType.LAZY) private Person owner; // Getter, Setter 생략 } 2. PERSIST persist3 될 때 자식을 함께 저장합니다. // given Person person = new Person(); person.setId(1L); person.setName(\"John Doe\"); Phone phone = new Phone(); phone.setId(1L); phone.setNumber(\"123-456-7890\"); person.addPhone(phone); // when : cascade = PERSIST를 설정한 경우, entityManager.persist(person); // then : 다음과 같이 2개의 Insert 쿼리가 나갑니다. INSERT INTO Person(name, id) VALUES( 'John Doe',1) INSERT INTO Phone( `number`, person_id, id) VALUES( '123-456-7890',1,1) 3. MERGE 부모의 상태를 병합4할 때, 자동으로 자식의 상태를 함께 확인해서 병합합니다. // given Phone phone = entityManager.find(Phone.class, 1L); Person person = phone.getOwner(); person.setName(\"John Doe Jr.\"); phone.setNumber(\"987-654-3210\"); entityManager.clear(); // when : cascade = MERGE를 설정한 경우, entityManager.merge(person); // then : 객체를 채우기 위해 다음과 같이 자동으로 Fetch Join이 나갑니다. SELECT p.id as id1_0_1_, p.name as name2_0_1_, ph.owner_id as owner_id3_1_3_, ph.id as id1_1_3_, ph.id as id1_1_0_, ph.\"number\" as number2_1_0_, ph.owner_id as owner_id3_1_0_ FROM Person p LEFT OUTER JOIN Phone ph on p.id=ph.owner_id WHERE p.id = 1 4. REMOVE 부모가 삭제될 떄 자식을 함께 삭제합니다. 참고로 Hibernate에는 DELETE라는 속성도 있는데 같은 동작이라고 합니다. // given : cascade = MERGE로 자식도 함께 영속성 컨텍스트로 불러와집니다. Person person = entityManager.find(Person.class, 1L); // when : cascade = REMOVE를 설정한 경우, entityManager.remove(person); // then : 부모가 삭제되기 전 자식을 먼저 삭제합니다. DELETE FROM Phone WHERE id = 1 DELETE FROM Person WHERE id = 1 5. DETACH 부모가 분리5될 때, 자식도 함께 분리합니다. // given : cascade = MERGE로 자식도 함께 영속성 컨텍스트로 불러와집니다. Person person = entityManager.find(Person.class, 1L); Phone phone = person.getPhones().get(0); assertTrue(entityManager.contains(person)); assertTrue(entityManager.contains(phone)); // when : cascade = DETACH를 설정한 경우, entityManager.detach(person); // then : 부모가 컨텍스트에서 분리될 떄, 자식도 함께 분리합니다. assertFalse(entityManager.contains(person)); assertFalse(entityManager.contains(phone)); 6. Hibernate 추가 명세 Hibernate에서는 추가로 LOCK, REFRESH, REPLICATE 세가지 옵션을 더 지원합니다. LOCK // given : person 영속성 컨텍스트로 불러오기 Person person = entityManager.find(Person.class, 1L); assertEquals(1, person.getPhones().size()); Phone phone = person.getPhones().get(0); assertTrue(entityManager.contains(person)); assertTrue(entityManager.contains(phone)); // person 분리 entityManager.detach(person); assertFalse(entityManager.contains(person)); assertFalse(entityManager.contains(phone)); // when : entityManager.unwrap(Session.class) .lock(person, new LockOptions(LockMode.NONE)); // then assertTrue(entityManager.contains(person)); assertTrue(entityManager.contains(phone)); REFRESH REPLICATE Orphan Removal MySQL Cascade 결론 References URL 게시일자 방문일자 작성자 Hibernate는 JPA 명세의 구현체입니다. ↩︎\n쉬운 이해를 위해 별도의 예시를 만들기보다 본문 링크에 있는 예시를 최대한 그대로 시용하겠습니다. ↩︎\nSpring Data JPA의 Repository에서는 save()메서드에 해당합니다. ↩︎\nJPA 공식문서에서는 Merge에 대해 다음과 같이 설명하고 있습니다.\nThe merge operation allows for the propagation of state from detached entities onto persistent entities managed by the entity manager. 병합(merge) 작업은 분리(detached)된 엔티티에서의 상태를 엔티티 매니저(entity manager)가 관리하는 영속 엔티티로 전파할 수 있도록 합니다.\n즉, 위 예시에서는 영속 상태의 엔티티를 영속성 컨텍스트에 불러오는 과정에서 Merge 옵션이 있으면 부모와 자식을 한번에 가져오는 것으로 이해할 수 있습니다. ↩︎ JPA 공식문서에서는 다음과 같은 상황에서 분리가 발생한다고 설명하고 있습니다.\n트랜잭션 스코프(persistence context)의 영속성 컨텍스트를 사용하는 경우, 트랜잭션 커밋 시 트랜잭션 롤백 시 엔티티를 영속성 컨텍스트에서 분리(detach)하는 경우 영속성 컨텍스트를 비우는 경우 엔티티 매니저를 닫는 경우 엔티티를 직렬화하거나 엔티티를 값으로 전달할 때(예: 다른 애플리케이션 계층으로, 원격 인터페이스를 통해 등) ↩︎ ","wordCount":"635","inLanguage":"ko","datePublished":"2024-05-13T21:01:16+09:00","dateModified":"2024-05-13T21:01:16+09:00","author":{"@type":"Person","name":"Leaf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://leaf-nam.github.io/posts/concept/jpa_cascade_vs_mysql_cascade_vs_orphan_removal/"},"publisher":{"@type":"Organization","name":"봄을 기다리는 낙엽","logo":{"@type":"ImageObject","url":"https://leaf-nam.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://leaf-nam.github.io/ accesskey=h title="LEAF (Alt + H)">LEAF</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://leaf-nam.github.io/posts/concept/ title=개념정리><span>개념정리</span></a></li><li><a href=https://leaf-nam.github.io/posts/review/ title="개발서적 리뷰"><span>개발서적 리뷰</span></a></li><li><a href=https://leaf-nam.github.io/search/ title=검색><span>검색</span></a></li><li><a href=https://leaf-nam.github.io/posts/ title=게시글><span>게시글</span></a></li><li><a href=https://leaf-nam.github.io/posts/tips/ title=미세팁><span>미세팁</span></a></li><li><a href=https://leaf-nam.github.io/posts/coldcase/ title=미제사건><span>미제사건</span></a></li><li><a href=https://leaf-nam.github.io/archives/ title=아카이브><span>아카이브</span></a></li><li><a href=https://leaf-nam.github.io/categories/ title=카테고리><span>카테고리</span></a></li><li><a href=https://leaf-nam.github.io/tags/ title=태그><span>태그</span></a></li><li><a href=https://github.com/leaf-nam/blog title=Git><span>Git</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://leaf-nam.github.io/>홈</a>&nbsp;»&nbsp;<a href=https://leaf-nam.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://leaf-nam.github.io/posts/concept/>개념정리</a></div><h1 class="post-title entry-hint-parent">JPA Cascade vs Mysql Cascade vs Orphan Removal</h1><div class=post-description>Cascade의 개념 차이에 대해 정리합니다.</div><div class=post-meta><span title='2024-05-13 21:01:16 +0900 KST'>2024. 5. 13.</span>&nbsp;·&nbsp;3 분&nbsp;·&nbsp;635 단어&nbsp;·&nbsp;Leaf&nbsp;|&nbsp;<a href=https://github.com/leaf-nam/blog/blob/main/content/ rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>목차</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#개요>개요</a></li><li><a href=#jpa-cascade>JPA Cascade</a><ul><li><a href=#1-all>1. ALL</a></li><li><a href=#2-persist>2. PERSIST</a></li><li><a href=#3-merge>3. MERGE</a></li><li><a href=#4-remove>4. REMOVE</a></li><li><a href=#5-detach>5. DETACH</a></li><li><a href=#6-hibernate-추가-명세>6. Hibernate 추가 명세</a></li></ul></li><li><a href=#orphan-removal>Orphan Removal</a></li><li><a href=#mysql-cascade>MySQL Cascade</a></li><li><a href=#결론>결론</a></li><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><h2 id=개요>개요<a hidden class=anchor aria-hidden=true href=#개요>#</a></h2><p>프로젝트를 하던 중, 엔티티 연관관계에서 cascade를 잘못 사용하여 잘못된 엔티티가 삭제되었고, 테스트가 실패하는 상황이 발생했습니다.</p><p>동일한 실수를 반복하지 않도록, 이번 기회에 JPA Cascade 개념과 Orphan Removal과는 어떠한 차이가 있는지, 나아가 MySQL의 Cascade와는 어떻게 다른지 확인해보겠습니다.</p><h2 id=jpa-cascade>JPA Cascade<a hidden class=anchor aria-hidden=true href=#jpa-cascade>#</a></h2><p>먼저 <a href=https://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#gjjnj>Java EE 6의 가이드</a>에는 다음과 같이 명시되어 있습니다.</p><figure><img loading=lazy src=cascade_jpa.png alt="Java EE6 가이드의 CASCADE 설명"><figcaption><p>Java EE6 가이드의 CASCADE 설명</p></figcaption></figure><p>설명을 읽어보면 Cascade는 영속성 컨텍스트(Persistence Context)에 부모(Cascade옵션을 작성하는 엔티티)가 특정 작업을 수행할 때, 연관된 엔티티(이후 자식이라고 하겠습니다)도 같은 작업을
수행해야 함을 명시하고 있습니다.</p><p>자세한
내용은 <a href=https://docs.jboss.org/hibernate/orm/7.0/userguide/html_single/Hibernate_User_Guide.html#pc-cascade>Hibernate의 공식문서</a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>
를 살펴보면 더욱 이해하기 좋은 것 같습니다.</p><p>위 문서의 본문 예시를 참조하면 각 옵션의 주요 기능을 알 수 있습니다.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><h3 id=1-all>1. ALL<a hidden class=anchor aria-hidden=true href=#1-all>#</a></h3><ul><li>아래 모든 기능들을 포함하는 속성입니다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Person</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Cascade가 All로 설정되어 모든 옵션이 적용되어 있습니다.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@OneToMany</span><span class=p>(</span><span class=n>mappedBy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;owner&#34;</span><span class=p>,</span><span class=w> </span><span class=n>cascade</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>CascadeType</span><span class=p>.</span><span class=na>ALL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Phone</span><span class=o>&gt;</span><span class=w> </span><span class=n>phones</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Getter, Setter 생략</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>addPhone</span><span class=p>(</span><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>phones</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>phone</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>phone</span><span class=p>.</span><span class=na>setOwner</span><span class=p>(</span><span class=k>this</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Phone</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Column</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;`number`&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>number</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@ManyToOne</span><span class=p>(</span><span class=n>fetch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FetchType</span><span class=p>.</span><span class=na>LAZY</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Person</span><span class=w> </span><span class=n>owner</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Getter, Setter 생략</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=2-persist>2. PERSIST<a hidden class=anchor aria-hidden=true href=#2-persist>#</a></h3><ul><li>persist<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> 될 때 자식을 함께 저장합니다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// given</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Person</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>person</span><span class=p>.</span><span class=na>setId</span><span class=p>(</span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>person</span><span class=p>.</span><span class=na>setName</span><span class=p>(</span><span class=s>&#34;John Doe&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Phone</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>phone</span><span class=p>.</span><span class=na>setId</span><span class=p>(</span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>phone</span><span class=p>.</span><span class=na>setNumber</span><span class=p>(</span><span class=s>&#34;123-456-7890&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>person</span><span class=p>.</span><span class=na>addPhone</span><span class=p>(</span><span class=n>phone</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// when : cascade = PERSIST를 설정한 경우,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>entityManager</span><span class=p>.</span><span class=na>persist</span><span class=p>(</span><span class=n>person</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// then : 다음과 같이 2개의 Insert 쿼리가 나갑니다.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>INSERT</span><span class=w> </span><span class=n>INTO</span><span class=w> </span><span class=nf>Person</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=n>VALUES</span><span class=p>(</span><span class=w> </span><span class=err>&#39;</span><span class=n>John</span><span class=w> </span><span class=n>Doe</span><span class=err>&#39;</span><span class=p>,</span><span class=n>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>INSERT</span><span class=w> </span><span class=n>INTO</span><span class=w> </span><span class=nf>Phone</span><span class=p>(</span><span class=w> </span><span class=err>`</span><span class=n>number</span><span class=err>`</span><span class=p>,</span><span class=w> </span><span class=n>person_id</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=n>VALUES</span><span class=p>(</span><span class=w> </span><span class=err>&#39;</span><span class=n>123</span><span class=o>-</span><span class=n>456</span><span class=o>-</span><span class=n>7890</span><span class=err>&#39;</span><span class=p>,</span><span class=n>1</span><span class=p>,</span><span class=n>1</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h3 id=3-merge>3. MERGE<a hidden class=anchor aria-hidden=true href=#3-merge>#</a></h3><ul><li>부모의 상태를 병합<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>할 때, 자동으로 자식의 상태를 함께 확인해서 병합합니다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// given</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>entityManager</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>Phone</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>phone</span><span class=p>.</span><span class=na>getOwner</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>person</span><span class=p>.</span><span class=na>setName</span><span class=p>(</span><span class=s>&#34;John Doe Jr.&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>phone</span><span class=p>.</span><span class=na>setNumber</span><span class=p>(</span><span class=s>&#34;987-654-3210&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>entityManager</span><span class=p>.</span><span class=na>clear</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// when : cascade = MERGE를 설정한 경우,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>entityManager</span><span class=p>.</span><span class=na>merge</span><span class=p>(</span><span class=n>person</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// then : 객체를 채우기 위해 다음과 같이 자동으로 Fetch Join이 나갑니다.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>p</span><span class=p>.</span><span class=na>id</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>id1_0_1_</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>p</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>name2_0_1_</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ph</span><span class=p>.</span><span class=na>owner_id</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>owner_id3_1_3_</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ph</span><span class=p>.</span><span class=na>id</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>id1_1_3_</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ph</span><span class=p>.</span><span class=na>id</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>id1_1_0_</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ph</span><span class=p>.</span><span class=s>&#34;number&#34;</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>number2_1_0_</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>ph</span><span class=p>.</span><span class=na>owner_id</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>owner_id3_1_0_</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>FROM</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>Person</span><span class=w> </span><span class=n>p</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>LEFT</span><span class=w> </span><span class=n>OUTER</span><span class=w> </span><span class=n>JOIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>Phone</span><span class=w> </span><span class=n>ph</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=n>on</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=na>id</span><span class=o>=</span><span class=n>ph</span><span class=p>.</span><span class=na>owner_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>WHERE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>p</span><span class=p>.</span><span class=na>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1</span><span class=w>
</span></span></span></code></pre></div><h3 id=4-remove>4. REMOVE<a hidden class=anchor aria-hidden=true href=#4-remove>#</a></h3><ul><li>부모가 삭제될 떄 자식을 함께 삭제합니다. 참고로 Hibernate에는 DELETE라는 속성도 있는데 같은 동작이라고 합니다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// given : cascade = MERGE로 자식도 함께 영속성 컨텍스트로 불러와집니다.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>entityManager</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// when : cascade = REMOVE를 설정한 경우, </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>entityManager</span><span class=p>.</span><span class=na>remove</span><span class=p>(</span><span class=n>person</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// then : 부모가 삭제되기 전 자식을 먼저 삭제합니다.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>DELETE</span><span class=w> </span><span class=n>FROM</span><span class=w> </span><span class=n>Phone</span><span class=w> </span><span class=n>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>DELETE</span><span class=w> </span><span class=n>FROM</span><span class=w> </span><span class=n>Person</span><span class=w> </span><span class=n>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>1</span><span class=w>
</span></span></span></code></pre></div><h3 id=5-detach>5. DETACH<a hidden class=anchor aria-hidden=true href=#5-detach>#</a></h3><ul><li>부모가 분리<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>될 때, 자식도 함께 분리합니다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// given : cascade = MERGE로 자식도 함께 영속성 컨텍스트로 불러와집니다.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>entityManager</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>person</span><span class=p>.</span><span class=na>getPhones</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=n>0</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertTrue</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>person</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertTrue</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>phone</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// when : cascade = DETACH를 설정한 경우, </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>entityManager</span><span class=p>.</span><span class=na>detach</span><span class=p>(</span><span class=n>person</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// then : 부모가 컨텍스트에서 분리될 떄, 자식도 함께 분리합니다.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertFalse</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>person</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertFalse</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>phone</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><h3 id=6-hibernate-추가-명세>6. Hibernate 추가 명세<a hidden class=anchor aria-hidden=true href=#6-hibernate-추가-명세>#</a></h3><ul><li>Hibernate에서는 추가로 LOCK, REFRESH, REPLICATE 세가지 옵션을 더 지원합니다.</li></ul><h4 id=lock>LOCK<a hidden class=anchor aria-hidden=true href=#lock>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// given : person 영속성 컨텍스트로 불러오기</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Person</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>entityManager</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>Person</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertEquals</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>person</span><span class=p>.</span><span class=na>getPhones</span><span class=p>().</span><span class=na>size</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Phone</span><span class=w> </span><span class=n>phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>person</span><span class=p>.</span><span class=na>getPhones</span><span class=p>().</span><span class=na>get</span><span class=p>(</span><span class=n>0</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertTrue</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>person</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertTrue</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>phone</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// person 분리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>entityManager</span><span class=p>.</span><span class=na>detach</span><span class=p>(</span><span class=n>person</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertFalse</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>person</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertFalse</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>phone</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// when : </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>entityManager</span><span class=p>.</span><span class=na>unwrap</span><span class=p>(</span><span class=n>Session</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>.</span><span class=na>lock</span><span class=p>(</span><span class=n>person</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LockOptions</span><span class=p>(</span><span class=n>LockMode</span><span class=p>.</span><span class=na>NONE</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// then</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertTrue</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>person</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertTrue</span><span class=p>(</span><span class=n>entityManager</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=n>phone</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><h4 id=refresh>REFRESH<a hidden class=anchor aria-hidden=true href=#refresh>#</a></h4><h4 id=replicate>REPLICATE<a hidden class=anchor aria-hidden=true href=#replicate>#</a></h4><h2 id=orphan-removal>Orphan Removal<a hidden class=anchor aria-hidden=true href=#orphan-removal>#</a></h2><h2 id=mysql-cascade>MySQL Cascade<a hidden class=anchor aria-hidden=true href=#mysql-cascade>#</a></h2><h2 id=결론>결론<a hidden class=anchor aria-hidden=true href=#결론>#</a></h2><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><table><thead><tr><th style=text-align:left>URL</th><th style=text-align:left>게시일자</th><th style=text-align:left>방문일자</th><th style=text-align:left>작성자</th></tr></thead></table><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Hibernate는 JPA 명세의 구현체입니다.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>쉬운 이해를 위해 별도의 예시를 만들기보다 본문 링크에 있는 예시를 최대한 그대로 시용하겠습니다.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>Spring Data JPA의 Repository에서는 save()메서드에 해당합니다.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://download.oracle.com/otndocs/jcp/persistence-2_2-mrel-eval-spec/index.html>JPA 공식문서</a>에서는 Merge에 대해 다음과 같이 설명하고 있습니다.</p><ul><li>The merge operation allows for the propagation of state from detached entities onto persistent entities
managed by the entity manager.</li></ul><blockquote><p>병합(merge) 작업은 분리(detached)된 엔티티에서의 상태를 엔티티 매니저(entity manager)가 관리하는 영속 엔티티로 전파할 수 있도록 합니다.</p></blockquote><ul><li>즉, 위 예시에서는 영속 상태의 엔티티를 영속성 컨텍스트에 불러오는 과정에서 Merge 옵션이 있으면 부모와 자식을 한번에 가져오는 것으로 이해할 수 있습니다.</li></ul>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></li><li id=fn:5><p><a href=https://download.oracle.com/otndocs/jcp/persistence-2_2-mrel-eval-spec/index.html>JPA 공식문서</a>에서는 다음과 같은 상황에서 분리가 발생한다고 설명하고 있습니다.</p><ol><li>트랜잭션 스코프(persistence context)의 영속성 컨텍스트를 사용하는 경우, 트랜잭션 커밋 시</li><li>트랜잭션 롤백 시</li><li>엔티티를 영속성 컨텍스트에서 분리(detach)하는 경우</li><li>영속성 컨텍스트를 비우는 경우</li><li>엔티티 매니저를 닫는 경우</li><li>엔티티를 직렬화하거나 엔티티를 값으로 전달할 때(예: 다른 애플리케이션 계층으로, 원격 인터페이스를 통해 등)</li></ol>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://leaf-nam.github.io/tags/concept/>Concept</a></li></ul><nav class=paginav><a class=prev href=https://leaf-nam.github.io/posts/coldcase/localhost_%EC%BF%A0%ED%82%A4_%EB%8F%84%EB%82%9C%EC%82%AC%EA%B1%B4/><span class=title>« 이전 페이지</span><br><span>localhost_쿠키_도난사건</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share JPA Cascade vs Mysql Cascade vs Orphan Removal on x" href="https://x.com/intent/tweet/?text=JPA%20Cascade%20vs%20Mysql%20Cascade%20vs%20Orphan%20Removal&amp;url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f&amp;hashtags=concept"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JPA Cascade vs Mysql Cascade vs Orphan Removal on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f&amp;title=JPA%20Cascade%20vs%20Mysql%20Cascade%20vs%20Orphan%20Removal&amp;summary=JPA%20Cascade%20vs%20Mysql%20Cascade%20vs%20Orphan%20Removal&amp;source=https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JPA Cascade vs Mysql Cascade vs Orphan Removal on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f&title=JPA%20Cascade%20vs%20Mysql%20Cascade%20vs%20Orphan%20Removal"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JPA Cascade vs Mysql Cascade vs Orphan Removal on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JPA Cascade vs Mysql Cascade vs Orphan Removal on whatsapp" href="https://api.whatsapp.com/send?text=JPA%20Cascade%20vs%20Mysql%20Cascade%20vs%20Orphan%20Removal%20-%20https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JPA Cascade vs Mysql Cascade vs Orphan Removal on telegram" href="https://telegram.me/share/url?text=JPA%20Cascade%20vs%20Mysql%20Cascade%20vs%20Orphan%20Removal&amp;url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share JPA Cascade vs Mysql Cascade vs Orphan Removal on ycombinator" href="https://news.ycombinator.com/submitlink?t=JPA%20Cascade%20vs%20Mysql%20Cascade%20vs%20Orphan%20Removal&u=https%3a%2f%2fleaf-nam.github.io%2fposts%2fconcept%2fjpa_cascade_vs_mysql_cascade_vs_orphan_removal%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=leaf-nam/leaf-nam.github.io issue-term=title theme=boxy-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://leaf-nam.github.io/>봄을 기다리는 낙엽</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="복사";function s(){t.innerHTML="복사 완료!",setTimeout(()=>{t.innerHTML="복사"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>